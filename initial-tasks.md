# Initial Sample (but also real) Tasks
 
 ## Description
 This document outlines the initial list of user tasks and to-dos to use as a dataset for testing the use of the application. The to-dos are not yet formatted to any specification, it is just a list of notes. These will be refined and formatted as we develop the application.

 ## Initial Tasks
 - Javier Imbus on Slack, https://livevox.slack.com/archives/D7AJJCHU5/p1769715548454999 11:39 jan 29th
```
Hey Eugene, I see ASG components using the new /22 subnets in lv-na4, not yet ECS, you mentioned that depends on redeployments, we executed this more than a week ago:https://jira.livevox.com/browse/NETOPS-11162https://jira.livevox.com/browse/NETOPS-11165Should we start seeing ECS to use the new subnets?
```
- build and refine a task management CLI app in Python (taskmanager) with a SQLite backend for local testing and development
- UK2: continue to integrate both jira tickets and my notes with ongoing updates and fixes
- EU1: Fix incorrect ECS ALB subnet assignments. From Shannon, SRE-5045 - EU1: Incorrect SG for internal ALBs. Status: On Hold | Priority: Medium. Internal ALBs have default VPC SG instead of internal ALB SG. Updated: Jan 16, 2026
- Work integrating Aaron's OpenAPM sidecar changes to ECS logging into ECS/component_fargate_terraform. Right now Aaron is working on a manual update to a task definition until he gets it working, then he will refer the specification to me for implementation.
- STG4 implementation of multi-region support and migration on 2/18!! Need to migrate STG4 to use gitlab-ci 1.2, make sure all the instance and any project variables are set, figure out the migration steps for individeual applications via eng/COMPONENT-config updates, write a playbook, coordinate with devops, and execute. That will be one big step of preparing for STG4 migration to us-west-2. Another big item will be preparing for the cleanup of items in us-east-1 after the migration - SAFELY - and with manifests. I'll need to integrate everything learned from the TST2-a to TST2-b migration. and apply it all here.
- AWS KMS BYOK. Keep maintaining the confluence document with Jason Luster (https://library.livevox.com/pages/viewpage.action?pageId=240628474) and the tech demo (~/scratch/tmp148-byok_kms_demo).
- UK2: Monitor our needs. We might need to scramble to redeploy many things if the customer chooses our new BYOK proposal.
- the following is all pasted in from slack history:
- New item: KMS BYOK prep for next week, work with jasonwe need to model key rotation with "EBS, EFS, RDS, ...?"tech design write up which is a distillation of the slidesMCP Enhancements: lv-aws-servicesMCP Enhancements: lv-gitlabUpdate uk2 documentation and issuesFrom Kavya: https://jira.livevox.com/browse/DEVOPS-49647this is because there are no runnersfor now I have asked neeraj to bring up a DEVOPS-STG4 runner in lv-techops. pending...
- Debug consul_only to uk2 deploymentsis it running consul deploy 1.1 which has no uk2??why??a project or instance var must be set to 1.1 - instance CI_CODE_GITREF=1.1consul_only doesn't have the "resolve from CI version" logic (that is...incorectly pointing 1.2 at version-routing currently  )ROOT CAUSE:We were matching in the version-routing script foruk2/**but that was not catching things IN subdirectories!and so it was routing us to 1.1 (which did not have uk2)1.1 has had uk2 added for consul, now extraneousI updated the version-routing YAML to include (same for tst2) and now it works properlyuk2/**uk2/**/*
- [DONE] examined Shannon's question about UK2 and CORS. https://livevox.slack.com/archives/D27QZVDGX/p1769205457770519cdn-lv CORS confirmed correct  cdn-ENV confirmed to have no CORS config in prod envs  reported back to shannon, she will look elsewhere
- [DONE] new UK2: CORS request https://jira.livevox.com/login.jsp?permissionViolation=true&os_destination=%2Fbrowse%2FSRE-5348&page_caps=&user_role=
- UPDATE UK2 CDN process and ticket, and refer to IaaS/tools/aws-cdn-lv-add-cors command.
- carving out exceptions to deployment checker by component (dbaworker)supporting config fargate for lv_subnet_type_tagfigure out making 
  - New thing: Can we carve out exceptions to the deployment checker? and how can we track the exceptions?-- this came up from....dbaworker? Yes, dbaworker - chatted with Chandra (?) and jason about it and they are not allowed to do deployments, but perhaps they could
- s3-bucket-creator support b-region-only (even if that just means swapping what a and be region means?)
- NEW - jason 1:1resource expungement from tst2-a, lv-techopscheck the cost explorer as our measure!s3 buckets - coord w/jaime"resources"gitlab-ci 1.2 to all envs!!
- CDN - it looks like my process omitted creating the DNS A and AAAA records for it. Used AWS Console to provision it MUST GO BACK TO PROCESS AND UPDATE SRE-5265
- Fix: We are ending up with version-routing because of our automatic detection of gitlab-ci branch from the Project's CI YAML configuration. This is incorrect! It was a neat idea but because I put the version-routing shim in it breaks. It wasn't detected before because version-routing was sending everything not-tst2 to gitlab-ci 1.1. When we added UK2 to use 1.2 the changes required were put into 1.2 ... but not version-routing which was actually the branch being consumed. Currently all changes are in both 1.2 and version-routing
- UK2: gitlab-ci, ECS, ASG.gitlab: Add CI Variables for UK2:  glab-set-instance-var ACTIVE_REGION_UK2 aglab-set-instance-var AWS_ACCOUNT_UK2 604325178454glab-set-instance-var AWS_REGION_UK2_a eu-west-2glab-set-instance-var AWS_REGION_UK2 '${AWS_REGION_UK2_${ACTIVE_REGION_UK2}}'glab-set-instance-var GLCD_RUNNER_UK2_a "GLCD-UK2"glab-set-instance-var TF_STATE_BUCKET_UK2_a "lv-terraform-shared-state-eu-west-2-uk2"glab-set-instance-var TF_STATE_BUCKET_UK2 '${TF_STATE_BUCKET_UK2_${ACTIVE_REGION_UK2}}'gitlab-ci [version-routing] gitlab/pipelines/tst2-1.2-others-1.1.yml DONE in 104bdfd..8bd4650gitlab-ci [1.2]gitlab/pipelines/entry_pipeline.yml line 356:- changes: [ 'tst*/**', 'stg*/**', 'lv-stg*/**', 'na*/**', 'lv-na*/**', 'eu*/**' ]  gitlab/pipelines/consul-appconfig-cd-worker.yml (add uk2 section)  bash/configure_terraform_pipeline.sh:  line 182 `configure_terraform_pipeline.sh case "$LV_AWS_ACCOUNT" inget_lv_aws_account () {get_lv_aws_region ()component_deploy_child_pipeline.tmpl  asg_multipool_pipeline.tmpl  TEST: tst2 ticketing 26.1 to ensure gitlab-ci 1.2 is still working as expected  component_fargate_terraform [2.0] [1.2]create gitlab-ci/lv_fargate_app/config/ecs_fargate_defaults_uk2.yml   update gitlab-ci/lv_fargate_app/terraform/modules/lv_fargate_app/locals.tf   lv_fargate_app/terraform/modules/lv_fargate_app/main.tf   asg [4.0.0] - config/global_asg_config.json update line 101 to use ocsp 4.0.0  asg - ocsp-config [4.0.0] [3.5.6] add uk2/serverAttributes.json   NON-ASG/ECS STUFF: S3/CDN, ASG ALBUK2 ASG-ALBCI pipeline iac/gitlab-ci [1.2]gitlab/pipelines/devops_cdn-ci.yml  Working code devops_automation/alb_management [3.0]playbooks/alb_deployment/internal_alb_vars.yml   playbooks/vars/playbook_vars.yml  playbooks/alb_deployment/tasks/lv_components_alb.yml Add uk2 to ROUTE53_LOCAL_ZONE: add uk2/.gitkeep directory holder  Working code devops_automation/terraform_modules [multi-region]locals.tflv_environments.json TESTING gitlab runner did not have AWS docker credhelper set up  got ssh key from jason, ran https://github.com/LiveVoxEng/deploy-runner/blob/1.0/setup_docker_ecr_credhelper.sh[DONE] UK2 CDN content distribution SRE-5307 UK2: Ensure CDN content distribution is configured to allow UK2devops/cdn [3.0] added uk2 folder, removed uk1 folder  Modify lv-techops cdn-lv Bucket Policy to allow reads from uk2 from UK2 (604325178454)NOTE!!! UK2 Must have NO READ PERMS so iam:PutObject was removed!Also: Removed old awx roles from Bucket PolicyThis should still be fine for deploying content to s3://cdn-uk2 via pipeline        {
            "Sid": "ListBucketUk2-deployrunner",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::604325178454:role/deploy-runner-role-uk2"
            },
            "Action": "s3:ListBucket",
            "Resource": "arn:aws:s3:::cdn-lv"
        },
        {
            "Sid": "GetObjectUk2-deployrunner",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::604325178454:role/deploy-runner-role-tst3"
            },
            "Action": [
                "s3:GetObject"
            ],
            "Resource": "arn:aws:s3:::cdn-lv/*"
        }UK2: CDN Creation SRE-5265  UK2: Create ecs cluster logging bucket. NOTE! It required the LocationConstraint to work!  aws s3api create-bucket --bucket ecs-command-logging-uk2  --create-bucket-configuration LocationConstraint=eu-west-2UK2: ECS clusters - created with IaaS/tools/create_ecs_cluster.sh  u1u2u5u27Service Linked Roles config:Jaime: AWSServiceRoleForAutoScalingaws iam create-service-linked-role --aws-service-name autoscaling.amazonaws.com Eugene: AWSServiceRoleForApplicationAutoScaling_ECSServiceaws iam create-service-linked-role --aws-service-name ecs.application-autoscaling.amazonaws.comhowever, adjusting deploy-runner-role to add ecs.application-autoscaling.amazonaws.com to an allowed principal for iam:CreateServiceLinkedRole will allow this to be handled automaticallysre-lambdasJaime had to update sre-lambdas-config and gitlab-ci 1.1 to support uk2https://vcs.build.livevox.net/eng/sre-lambdas-config/-/commit/ec95b2301d6465e535769ab7cb3af6599c0c343dhttps://vcs.build.livevox.net/iac/gitlab-ci/-/commit/3342b5cc8912bf35a5654da395d7cfc544d8a212
- ECS/component_fargate_terraform: 2.0, supporting major.minor versioning, is currently oly being used for TST2 26.1 deployments. Next step is to make sure it is global and includes UK2 and any STG4 region changes we make to it.
- cloudtrail + S3 -- take my demo and productize it into TF -> IaaSSRE-5220 Research and implement CRUD tracking for S3 terraform state bucketsAndres' S3 code. Where can I go with it? What are its limitations? How do we handle transitioning smoothly with A/B regions including both resources AND state?Cleaning out remainining resources: TST2-A lv-techops NA3, NA5LV MCPs! SRE-5224 Update Cloudfront distributions to support TLS 1.2UK2 environment build! Kickoff meeting on Wednesday morningTERRAFORM STATE BUCKET and TRACKING (SRE-5220)BYOK (bring your own key)AMI: it's my time to try where instead of sharing AMIs we actually COPY them from env to env to remove building-block problem
- terraform everywhere: migrate to using use_locking=true in backend configs instead of dynamic locking via separate dynamodb table management. This is now supported in recent terraform versions and simplifies our backend configs significantly.
- 